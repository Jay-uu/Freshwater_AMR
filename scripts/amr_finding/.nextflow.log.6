Mar-17 11:43:38.390 [main] DEBUG nextflow.cli.Launcher - $> nextflow run amr_finding_230317.nf
Mar-17 11:43:38.833 [main] INFO  nextflow.cli.CmdRun - N E X T F L O W  ~  version 22.10.6
Mar-17 11:43:38.904 [main] DEBUG nextflow.plugin.PluginsFacade - Setting up plugin manager > mode=prod; embedded=false; plugins-dir=/home/jay/.nextflow/plugins; core-plugins: nf-amazon@1.11.3,nf-azure@0.14.2,nf-codecommit@0.1.2,nf-console@1.0.4,nf-ga4gh@1.0.4,nf-google@1.4.5,nf-tower@1.5.6,nf-wave@0.5.3
Mar-17 11:43:38.916 [main] INFO  org.pf4j.DefaultPluginStatusProvider - Enabled plugins: []
Mar-17 11:43:38.917 [main] INFO  org.pf4j.DefaultPluginStatusProvider - Disabled plugins: []
Mar-17 11:43:38.921 [main] INFO  org.pf4j.DefaultPluginManager - PF4J version 3.4.1 in 'deployment' mode
Mar-17 11:43:38.972 [main] INFO  org.pf4j.AbstractPluginManager - No plugins
Mar-17 11:43:39.222 [main] DEBUG nextflow.cli.CmdRun - Applied DSL=2 by global default
Mar-17 11:43:39.339 [main] INFO  nextflow.cli.CmdRun - Launching `amr_finding_230317.nf` [kickass_joliot] DSL2 - revision: 9100fbe4f5
Mar-17 11:43:39.340 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins default=[]
Mar-17 11:43:39.348 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins resolved requirement=[]
Mar-17 11:43:39.368 [main] DEBUG nextflow.secret.LocalSecretsProvider - Secrets store: /home/jay/.nextflow/secrets/store.json
Mar-17 11:43:39.391 [main] DEBUG nextflow.secret.SecretsLoader - Discovered secrets providers: [nextflow.secret.LocalSecretsProvider@18fdb6cf] - activable => nextflow.secret.LocalSecretsProvider@18fdb6cf
Mar-17 11:43:39.557 [main] DEBUG nextflow.Session - Session UUID: 5c9fe105-c65d-41d8-8210-ae38592a8572
Mar-17 11:43:39.558 [main] DEBUG nextflow.Session - Run name: kickass_joliot
Mar-17 11:43:39.558 [main] DEBUG nextflow.Session - Executor pool size: 24
Mar-17 11:43:39.573 [main] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'FileTransfer' minSize=10; maxSize=72; workQueue=LinkedBlockingQueue[10000]; allowCoreThreadTimeout=false
Mar-17 11:43:39.694 [main] DEBUG nextflow.cli.CmdRun - 
  Version: 22.10.6 build 5843
  Created: 23-01-2023 23:20 UTC (24-01-2023 00:20 CEST)
  System: Linux 6.0.18-300.fc37.x86_64
  Runtime: Groovy 3.0.13 on OpenJDK 64-Bit Server VM 17.0.3-internal+0-adhoc..src
  Encoding: UTF-8 (UTF-8)
  Process: 3865744@kadath [77.235.248.125]
  CPUs: 24 - Mem: 125.7 GB (4.3 GB) - Swap: 157 GB (100.7 GB)
Mar-17 11:43:39.803 [main] DEBUG nextflow.Session - Work-dir: /home/jay/master_thesis/scripts/amr_finding/work [btrfs]
Mar-17 11:43:39.804 [main] DEBUG nextflow.Session - Script base path does not exist or is not a directory: /home/jay/master_thesis/scripts/amr_finding/bin
Mar-17 11:43:39.825 [main] DEBUG nextflow.executor.ExecutorFactory - Extension executors providers=[]
Mar-17 11:43:39.884 [main] DEBUG nextflow.Session - Observer factory: DefaultObserverFactory
Mar-17 11:43:39.949 [main] DEBUG nextflow.cache.CacheFactory - Using Nextflow cache factory: nextflow.cache.DefaultCacheFactory
Mar-17 11:43:39.987 [main] DEBUG nextflow.util.CustomThreadPool - Creating default thread pool > poolSize: 25; maxThreads: 1000
Mar-17 11:43:40.184 [main] DEBUG nextflow.Session - Session start
Mar-17 11:43:43.552 [main] DEBUG nextflow.script.ScriptRunner - > Launching execution
Mar-17 11:43:43.929 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Mar-17 11:43:43.930 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Mar-17 11:43:43.938 [main] DEBUG nextflow.executor.Executor - [warm up] executor > local
Mar-17 11:43:43.949 [main] DEBUG n.processor.LocalPollingMonitor - Creating local task monitor for executor 'local' > cpus=24; memory=125.7 GB; capacity=24; pollInterval=100ms; dumpInterval=5m
Mar-17 11:43:44.215 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Mar-17 11:43:44.215 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Mar-17 11:43:44.228 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Mar-17 11:43:44.233 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Mar-17 11:43:44.276 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Mar-17 11:43:44.276 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Mar-17 11:43:44.324 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Mar-17 11:43:44.328 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Mar-17 11:43:44.413 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Mar-17 11:43:44.413 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Mar-17 11:43:44.470 [main] DEBUG nextflow.Session - Workflow process names [dsl2]: run_abricate, parse_checkm_summary, run_gtdbtk, run_rgi, checkm_process, combine_all
Mar-17 11:43:44.470 [main] DEBUG nextflow.Session - Igniting dataflow network (7)
Mar-17 11:43:44.489 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > checkm_process
Mar-17 11:43:44.494 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > parse_checkm_summary
Mar-17 11:43:44.495 [PathVisitor-1] DEBUG nextflow.file.PathVisitor - files for syntax: glob; folder: /home/jay/data/test_bins/; pattern: *; options: [type:dir]
Mar-17 11:43:44.497 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > run_abricate
Mar-17 11:43:44.510 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > run_rgi
Mar-17 11:43:44.515 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > run_gtdbtk
Mar-17 11:43:44.520 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > combine_all
Mar-17 11:43:44.527 [main] DEBUG nextflow.script.ScriptRunner - > Awaiting termination 
Mar-17 11:43:44.527 [main] DEBUG nextflow.Session - Session await
Mar-17 11:43:44.932 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Mar-17 11:43:44.947 [Task submitter] INFO  nextflow.Session - [21/a85287] Submitted process > run_abricate (2)
Mar-17 11:43:45.038 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Mar-17 11:43:45.043 [Task submitter] INFO  nextflow.Session - [80/70ccea] Submitted process > run_abricate (1)
Mar-17 11:43:45.081 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Mar-17 11:43:45.085 [Task submitter] INFO  nextflow.Session - [02/c42ab5] Submitted process > checkm_process (2)
Mar-17 11:43:45.151 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Mar-17 11:43:45.155 [Task submitter] INFO  nextflow.Session - [4d/7d86a5] Submitted process > checkm_process (1)
Mar-17 11:43:45.229 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Mar-17 11:43:45.231 [Task submitter] INFO  nextflow.Session - [15/f06c86] Submitted process > run_rgi (1)
Mar-17 11:43:45.296 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Mar-17 11:43:45.297 [Task submitter] INFO  nextflow.Session - [ef/bcee58] Submitted process > run_gtdbtk (2)
Mar-17 11:43:45.308 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Mar-17 11:43:45.322 [Task submitter] INFO  nextflow.Session - [04/3257c8] Submitted process > run_rgi (2)
Mar-17 11:43:45.350 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Mar-17 11:43:45.378 [Task submitter] INFO  nextflow.Session - [00/547e69] Submitted process > run_gtdbtk (1)
Mar-17 11:44:32.319 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 6; name: run_rgi (2); status: COMPLETED; exit: 0; error: -; workDir: /home/jay/master_thesis/scripts/amr_finding/work/04/3257c8c3c76ab3b6c01034a5f3cf8a]
Mar-17 11:44:32.369 [Task monitor] DEBUG nextflow.processor.TaskProcessor - Process `run_rgi (2)` is unable to find [UnixPath]: `/home/jay/master_thesis/scripts/amr_finding/work/04/3257c8c3c76ab3b6c01034a5f3cf8a/null_res` (pattern: `null_res`)
Mar-17 11:44:32.518 [Task monitor] ERROR nextflow.processor.TaskProcessor - Error executing process > 'run_rgi (2)'

Caused by:
  Missing output file(s) `null_res` expected by process `run_rgi (2)`

Command executed:

  echo '===== Start Erken-D1 ====='
  date
  sample_ID="Erken-D1"
  mkdir ${sample_ID}_bins
  for bin in Erken-D1/*.tar.gz
  do
  tar -xf $bin -C ${sample_ID}_bins --wildcards '*.faa.gz' --strip-components=3
  done
  
  gunzip ${sample_ID}_bins/*.faa.gz
  sed -i 's/[*]//g' ${sample_ID}_bins/*.faa
  mkdir ${sample_ID}_res
  for file in ${sample_ID}_bins/*
  do
  echo "running bin: $file"
  BIN_ID=`basename $file .faa`
  rgi main --input_sequence $file --output_file ${sample_ID}_res/${BIN_ID} -t protein -n 23 -a DIAMOND --low_quality --clean
  done
  date
  echo '===== Done Erken-D1 ====='

Command exit status:
  0

Command output:
  ===== Start Erken-D1 =====
  Friday 17 March 2023 11:43:45 AM CET
  running bin: Erken-D1_bins/Erken-D1_megahit_metabat_bin-1111.faa
  running bin: Erken-D1_bins/Erken-D1_megahit_metabat_bin-unbinned.faa
  Friday 17 March 2023 11:44:32 AM CET
  ===== Done Erken-D1 =====

Work dir:
  /home/jay/master_thesis/scripts/amr_finding/work/04/3257c8c3c76ab3b6c01034a5f3cf8a

Tip: you can replicate the issue by changing to the process work dir and entering the command `bash .command.run`
Mar-17 11:44:32.590 [Task monitor] DEBUG nextflow.Session - Session aborted -- Cause: Missing output file(s) `null_res` expected by process `run_rgi (2)`
Mar-17 11:44:32.648 [Task monitor] DEBUG nextflow.Session - The following nodes are still active:
[process] parse_checkm_summary
  status=ACTIVE
  port 0: (queue) OPEN  ; channel: -
  port 1: (cntrl) -     ; channel: $

[process] combine_all
  status=ACTIVE
  port 0: (queue) OPEN  ; channel: -
  port 1: (cntrl) -     ; channel: $

Mar-17 11:44:32.662 [main] DEBUG nextflow.Session - Session await > all processes finished
Mar-17 11:44:32.662 [main] DEBUG nextflow.Session - Session await > all barriers passed
Mar-17 11:44:32.688 [main] WARN  n.processor.TaskPollingMonitor - Killing running tasks (7)
Mar-17 11:44:32.945 [main] DEBUG nextflow.trace.WorkflowStatsObserver - Workflow completed > WorkflowStats[succeededCount=0; failedCount=1; ignoredCount=0; cachedCount=0; pendingCount=0; submittedCount=0; runningCount=1; retriesCount=0; abortedCount=6; succeedDuration=0ms; failedDuration=46.9s; cachedDuration=0ms;loadCpus=1; loadMemory=0; peakRunning=8; peakCpus=8; peakMemory=0; ]
Mar-17 11:44:33.070 [main] DEBUG nextflow.cache.CacheDB - Closing CacheDB done
Mar-17 11:44:33.145 [main] DEBUG nextflow.script.ScriptRunner - > Execution complete -- Goodbye
